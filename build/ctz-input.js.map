{"version":3,"file":"ctz-input.js","sources":["../src/CtzInput.ts","../src/CtzRadio.ts","../src/CtzSlider.ts"],"sourcesContent":["export class CtzInput {\n  _id: string;\n  _container: HTMLElement;\n  _label: HTMLLabelElement;\n  _form: HTMLFormElement;\n  _description: HTMLElement;\n  _value: any;\n\n  constructor(id: string, cls: string) {\n\n    /* determine parent-element */\n    const parent: HTMLElement | null = document.getElementById(id);\n\n    /* id - set once using private method */\n    this._id = `${id}-container`;\n\n    /* container */\n    this._container = document.createElement('div');\n    this._container.setAttribute('id', this.id);\n    this._container.setAttribute('class', `${cls} ctz-input`);\n\n    /* label */\n    this._label = document.createElement('label');\n    this._label.setAttribute('for', this.id);\n\n    /* form */\n    this._form = document.createElement('form');\n\n    /* description */\n    this._description = document.createElement('div');\n    this._description.setAttribute('class', 'description');\n\n    /* assemble */\n    this._container.appendChild(this._label);\n    this._container.appendChild(this._form);\n    this._container.appendChild(this._description);\n\n    if (parent !== null) {\n      /* add container to parent */\n      parent.appendChild(this._container);\n    }\n  }\n\n  get id() {\n    return this._id;\n  }\n\n  set id(id) {\n    console.log(\"Warning: CtzInput cannot set id\");\n  }\n\n  get label_text() {\n    return this._label.innerText;\n  }\n\n  set label_text(label: string) {\n    this._label.innerText = label;\n  }\n\n  get description_text() {\n    return this._description.innerText;\n  }\n\n  set description_text(description: string) {\n    this._description.innerText = description;\n  }\n\n  get value() {\n    return this._value;\n  }\n  \n  protected set value(value) {\n\n  }\n\n  considerSubmit(submit: string | boolean | undefined, verb: string) {\n\n    if (submit) {\n\n      /* if we have a submit:\n       *   add button\n       *   supress the input event for at the \"top\" level\n       */\n      const label: string = typeof submit === 'string' ? submit : 'Submit';\n\n      // create, populate submit-button\n      const btnSubmit: HTMLInputElement = document.createElement('input');\n      btnSubmit.setAttribute('type', 'submit');\n      btnSubmit.setAttribute('value', label);\n\n      // append button to form\n      this._form.appendChild(btnSubmit);\n\n      // prevent the default action (page reload)\n      this._form.onsubmit = (event: Event) => {\n        event.preventDefault();\n      };\n\n      // TODO: need a better way to enforce legal values of `verb`\n      if (verb === \"oninput\" || verb === \"onchange\") {\n        this._container[verb] = (event: Event) => {\n          event.stopPropagation();\n        };\n      }\n\n    }\n\n  }\n\n}\n","import {CtzInput} from './CtzInput';\n\nexport class CtzRadio extends CtzInput {\n\n  constructor(id: string) {\n\n    super(id, 'ctz-radio');\n\n    /* handler for form-inputs */\n    this._form.oninput = event => {\n      // we use arrow notation to preserve the meaning of `this`\n      const data = new FormData(this._form);\n      const value = data.get(this.id);\n\n      this._value = value;\n    };\n\n  }\n\n  init(choices: (string | object)[], value: string, submit: string | boolean | undefined) {\n\n    interface Choice {\n      value: string;\n      label: string;\n    }\n\n    // coerce each choice to an object\n    // inspired by https://observablehq.com/@jashkenas/inputs#radioDemo\n    const choiceSet = choices.map((c: string | object) : Choice  =>\n      typeof c === \"string\" ? {value: c, label: c} : c as Choice\n    );\n\n    // remove existing elements from form\n    while (this._form.firstChild) {\n      this._form.firstChild.remove();\n    }\n\n     // set choices\n     choiceSet.map((c: Choice) : void => {\n      const label = document.createElement('label');\n      const input = document.createElement('input');\n\n      input.setAttribute('type', 'radio');\n      input.setAttribute('name', this.id);\n      input.setAttribute('value', c.value);\n\n      // set value\n      input.value === value ?\n        input.setAttribute('checked', '') :\n        input.removeAttribute('checked');\n\n      label.appendChild(input);\n      label.appendChild(document.createTextNode(c.label));\n\n      this._form.appendChild(label);\n    });\n\n    super.considerSubmit(submit, 'oninput');\n\n    // invoke input to set _value\n    this._form.dispatchEvent(new CustomEvent('input'));\n  }\n\n}\n","import {CtzInput} from './CtzInput';\n\nexport class CtzSlider extends CtzInput {\n  _fnTransform(arg0: number): any {\n    throw new Error(\"Method not implemented.\");\n  }\n  _fnPrecision(arg0: any) {\n    throw new Error(\"Method not implemented.\");\n  }\n  _slider: HTMLInputElement;\n  _display: HTMLOutputElement;\n\n  constructor(id: string) {\n\n    super(id, 'ctz-slider');\n\n    /* slider */\n    this._slider = document.createElement('input');\n    this._slider.setAttribute('type', 'range');\n\n    /* display */\n    this._display = document.createElement('output');\n\n    /* populate form */\n    this._form.appendChild(this._slider);\n    this._form.appendChild(this._display);\n\n    /* listnener */\n    this._slider.oninput = event => {\n\n      console.log(this._fnTransform);\n\n      const value =\n        this._fnPrecision(\n          this._fnTransform(\n            Number(this._slider.value)\n          )\n        );\n\n      this._display.innerText = String(value);\n      this._value = value;\n    };\n  }\n\n  init(min: number, max: number, value: number, step: number, \n       fnTransform: (x: number) => number, precision: number, maxWidth: number) {\n\n    this._slider.setAttribute('min', String(min));\n    this._slider.setAttribute('max', String(max));\n    this._slider.setAttribute('step', String(step));\n    // set the value after min/max/step\n    this._slider.setAttribute('value', String(value));\n    this._slider.setAttribute('style', `width: 100%; max-width:${maxWidth}`);\n\n    this._fnTransform = fnTransform;\n    this._fnPrecision =\n      precision ?\n       x => {\n         const byTen = Math.pow(10, precision);\n         return Math.round(x * byTen) / byTen;\n       } :\n       x => x;\n\n    // invoke input\n    this._slider.dispatchEvent(new CustomEvent('input'));\n  }\n\n}\n"],"names":[],"mappings":"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"}